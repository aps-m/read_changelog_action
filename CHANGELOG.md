# Changelog
Все заметные изменения в этом проекте будут документированы в этом файле.

Формат основан на [Ведите changelog](https://keepachangelog.com/ru/1.0.0/),
и этот проект придерживается [Семантическое Версионирование](https://semver.org/lang/ru/spec/v2.0.0.html).

## [Новое]
- Увеличена точность формирования сигнала PPS.
- Добавлена блокировка по частоте в схему ВНР.
- Добавлена защита 32Q БАВР.
- В контроль ТТ БАВР добавлено поведение для 32Q.
- Обновлена защита 67.
   - Добавлен пуск по напряжению.
   - Добавлена блокировка на время пуска двигателя.
   - Добавлена блокировка по Ih2.
- Изменён код переменных TIS контроля ТТ для БАВР (CTSF -> CTS).
- Исправлена блокировка на время пуска двигателя в 50/51.
- Изменены условия сброса переменной "Измерение I0" в 50N/51N и 67N.
- Обновлена защита 50/51 РЗА.
   - Добавлен пуск по 27 или 47.
- Добавлена защита 49 в РЗА тип 1.
- Обновлены защиты 27/27S, 59 РЗА.
   - Добавлена работа по прямой последовательности.
- Добавлена защита 50/51 ВНР.
- Обновлена защита 50N/51N РЗА.
   - Добавлен пуск по 59N.
- Изменён алгоритм формирования MAC адреса.
- Для датчика напряжения "Сеть" добавлен вольтметр на мнемосхему.
- Исправлена ошибка невозможности скачивания некоторых осциллограмм, логов и журналов регистратора.
- Добавлена защита 21FL РЗА.
- Обновлена схема ручного АВР для БАВР тип 2 «СВ+Байпас».
   - Изменён расчёт времени включения СВ Байпас.
- Исправлена работа БАВР по U макс.
- Изменена стандартная уставка по напряжению и выдержка времнени для 2 ступени защиты 59 БАВР.
- Модернизирована логика учёта бестоковой паузы в схеме БАВР при выдаче команд на выключатели.
- Максимальное время подсветки дисплея ограничено 30 минутами.
- Добавлена поддержка английского языка.
- Удалены тестовые сигналы в 49 защите.
- Добавлена поддержка платы питания с 3 силовыми быстрыми выходами (тип 3).
- Добавлена поддержка платы питания с 2 перекидными реле (тип 4).
- Добавлены сигналы "Готовность ИПМ В1/В2".
- Исправлено формирование часового пояса в Comtrade файле для некратных поясов.
- Исправлен учёт энергии на отдельных временных диапазонах и увеличена точность.
- Добавлено отображение результатов расчёта 21FL (ОМП) в регистратор событий.
- Отключено формирование сигнала сброс после обновлении конфигурации.
- Добавлены в регистратор событий телекоманды и сигналы с HMI.

## [1.22.3] - 2023-11-22

### Добавлено
- Добавлен режим работы МИР ИПМ в режиме "Без синхронизации".

### Изменено
- Оптимизировано чтение данных из SV потоков.

## [1.23.0] - 2023-11-21

### Добавлено
- Добавлена блокировка ВНР по углу для схемы Uл.
- Добавлен КС ВНР.
- Добавлены защиты 25 АВР, 25 ВНР.
- Добавлена блокировка из ЛУ для пуска по углу.
- Добавлен тип датчика напряжения - "Сеть".
- Добавлены сигналы блокировки по БНН для защит РЗА: 25, 27/27S, 27R, 47, 59, 59N, 81.

### Изменено
- Увеличена максимальная длина строки логического уравнения до 192.
- Обновлена защита 25 БАВР.
   - Добавлена переменная времени возврата.
   - Расширен диапазон уставки по df.
- Изменён вывод сигналов в осциллограмму с поясов Роговского и МИР ИПМ.

### Исправлено
- Исправлена ошибка при отключении ТТ.

## [1.22.2] - 2023-11-20

### Изменено
- Исправлена работа SV потоков с ИПМ.
- Исправлена инициализация расчётов токов.

## [1.22.1] - 2023-11-20

### Изменено
- Изменён вывод сигналов в осциллограмму с поясов Роговского и МИР ИПМ (добавлен учёт коэффициента калибровки).

## [1.22.0] - 2023-10-23

### Добавлено
- Добавлена возможность инвертировать аналоговые входы.
- Добавлена возможность ручного задания коэффициентов юстировки.
- Добавлена переменная активации ТТ.
- Добавлен выбор типа датчиков (ТТ/ТН).
- Добавлена возможность настройки порта Modbus TCP.
- Добавлена возможность отключения FTP.
- Добавлена поддержка IEC 61850-9-2 LE для МИР ИПМ.
- Добавлен коэффициент мощности (cosφ) для БАВР.
- Добавлена поддержка новых МП.

### Изменено
- Изменён алгоритм формирования MAC адреса.
- Увеличено до 32 максимальное количество логических элементов каждого типа в логических уравнениях.

### Исправлено
- Исправлено задание коэффициентов юстировки на краях диапазона.
- Исправлена возможность назначения неподдерживаемых типов плат.

## [1.21.1] - 2023-10-27

### Добавлено
- Добавлен сброс заводских параметров при ошибках памяти.

## [1.21.0] - 2023-09-26

### Добавлено
- Добавлена регистрация потери связи с дисплеем.
- Обновлена защита 25 БАВР.
   - Добавлена вторая ступень.
   - Добавлена работа по частоте.
   - Добавлена переменная выдержки времени.
   - Добавлены сигналы "Наличие Uсинх1/2".
- Обновлена защита 25 РЗА.
   - Добавлена переменная выдержки времени.
   - Добавлены сигналы "Наличие Uсинх1/2".

### Изменено
- Увеличена уставка времени для переменных логических уравнений до 30000 с.
- Расширен диапазон уставки по df в 25 защите.

### Исправлено
- Исправлено применение конфигурации при удалении логических уравнений.

### Удалено
- Удалена проверка состояния выключателя из схем 27/27S в БАВР и АВР.
- Удалена переменная "Выдержка времени разрешения".

## [1.20.1] - 2023-08-11

### Исправлено
- Исправлена работа БНН по I2.
- Исправлена работа БНН в 32Q/P.
- Исправлена работа 32Q/P по ТН на КЛ.

## [1.20.0] - 2023-08-03

### Добавлено
- Добавлены 3 и 4 ступени в защиту 81L.
- Добавлена переменная сброса из ЛУ.
- Добавлены разные режимы 2ТТ.
- Добавлено ручное разрешение включения при контроле синхронизма.

### Исправлено
- Исправлена схема подачи импульсных сигналов на выключатели.

## [1.19.1] - 2023-07-25

### Исправлено
- Исправлена работа осциллографа после перезагрузки.

## [1.19.0] - 2023-07-24

### Добавлено
- Добавлена блокировка работы защит на 1 периоде.
- В РНМ добавлен выбор ТН.
- Добавлена поддержка РЗА тип 4 (УСК) в МИР 200.
- Добавлена 49 защита в РЗА тип 3 (ДЗМ).
- Добавлены сигналы направлений в 25 защиту для РЗА тип 3 (ДЗМ).
- Добавлены сигналы срабатывания диф. отсечки в 87T/M.
- Добавлена блокировка при неисправности в токовых цепях для защит: 21, 40, 32P, 32Q.

## [1.18.1] - 2023-05-31

### Исправлено
- Исправлена работа тестов дискретных выходов с дисплея.

## [1.18.0] - 2023-04-25

### Добавлено
- Добавлена поддержка плат с поясами Роговского.
- Добавлена поддержка аналоговых цепей и защит в РЗА тип 5 (ЦС).

### Изменено
- Изменена версия формата Comtrade на 2013.

### Исправлено
- Исправлено появление значений в неиспользуемых битах данных осциллограмм.
- Исправлена обратная совместимость контроля БК АВ ТН и предохранителя.

## [1.17.2] - 2023-03-09

### Исправлено
- Исправлено зависание при прошивке заводских параметров.

## [1.17.1] - 2023-03-06

### Исправлено
- Исправлена работа МИР 100 с одной дискретной платой.
- Исправлены наименования дискретных входов на дисплее.
- Отключён коэффициент B при юстировке.

## [1.17.0] - 2023-02-22

### Добавлено
- Добавлена возможность отключения дискретной платы в РЗА тип 1.
- Добавлена блокировка по уровню сигнала в схему блокировки по второй гармонике в 87T/87M.

### Исправлено
- Исправлено направление расчёта мощности в РЗА тип 2 (ДЗТ).
- Исправлен пересчёт выдержек времени в схеме контроля АВ ТН.

## [1.16.0] - 2023-02-07

### Добавлено
- Добавлена поддержка РЗА тип 1 в МИР 200.

### Изменено
- Время горения/зажигания дуги заменено на время корректировки.

### Исправлено
- Исправлена работа блока PULSE при переводе времени назад.
- Исправлено формирование рабочих времён выключателя в АСК с ненулевым временем горения/зажигания дуги.

## [1.15.0] - 2022-12-26

### Добавлено
- Добавлен РЗА тип 3 (ДЗМ).
- Добавлена поддержка настройки плат расширения.
- Добавлен "Вызов регистратора событий" с кнопки.
- Добавлен вывод в осциллограмму диф. тока и тока торможения.

### Изменено
- Изменена уставка по умолчанию для IH2.
- Изменён диапазон а1 в защите 87T/87M.

### Исправлено
- Исправлены коды дисплея и материнской платы в логе.
- Исправлен угол согласования для сигналов с ТН на СШ для РЗА тип 2 (ДЗТ).
- Символ тире в сигналах ("Дуга - сигнал с ячеек xx") заменён на дефис.

## [1.14.2] - 2022-12-13

### Исправлено
- Исправлена уставка выдержки взвода пружины на 15с.

## [1.14.1] - 2022-12-11

### Исправлено
- Исправлена инициализация аналоговых сигналов и LATCH.
- Исправлена перезагрузка при добавлении пустой строки в уравнениях.

## [1.14.0] - 2022-12-09

### Добавлено
- Добавлен РЗА тип 5 (ЦС).
- Добавлен режим мигания и удержания светодиодов.
- Добавлена возможность тестировать незапараметрированные входа.

### Исправлено
- Исправлен запрет работы неактивных светодиодов и выходов через матрицы.
- Исправлено появление событий с неправильной датой в регистраторе при обновлении конфигурации.
- Исправлено появление пустых событий в регистраторе.

## [1.13.1] - 2022-11-29

### Исправлено
- Исправлен постоянный сброс времени работы выключателей после подачи команды.

## [1.13.0] - 2022-11-16

### Добавлено
- Добавлена поддержка названий дискретных входов/выходов.
- Добавлен контроль синхронизма для ручного АВР.
- Добавлен контроль состояния выключателей в схему АСК.
- Добавлено усреднение df за период в 25 БАВР.
- Добавлены защиты 67 и 67N в РЗА тип 2 (ДЗТ).

### Изменено
- У расчётных сигналов Idiff и It заменены единицы измерения (% → о.е.).
- Изменены единицы измерения уставок в 87T (% → о.е.).

### Исправлено
- Исправлен контроль ТТ в 46 и 50N в РЗА тип 4 (УСК).
- Исправлена схема ручного АВР в БАВР тип 1.
- Исправлена некорректная работа усреднения в 50N/51N РЗА при изменении групп уставок.
- Исправлена блокировка от БНН в схеме 67 РЗА.
- Исправлен алгоритм формирования MAC адреса.

## [1.12.1] - 2022-10-21

### Добавлено
- Добавлен ток Ia в качестве опорного сигнала при отсутствии напряжений.

### Исправлено
- Исправлена проверка выбора ТН для РЗА тип 2 (ДЗТ).

## [1.12.0] - 2022-10-17

### Добавлено
- Добавлена адаптивность 27/59 для БАВР тип 1.
- Добавлен сброс переменных VE при обновлении конфигурации.
- Добавлена проверка оперативного питания во все типы РЗА/БАВР.
- Добавлена поддержка РЗА тип 2 (ДЗТ) и РЗА тип 4 (УСК).
- Добавлен выбор активной группы уставок через АСУ ТП.
- Добавлена блокировка работы по памяти через 100мс после пропажи напряжения в 67.
- Добавлено измерение ресурса выключателей и время горения дуги.
- Добавлена поддержка новых БП.
- В защиты БАВР (кроме РНМ) добавлен выбор ТН.
- В защиты 27/59 БАВР/АВР/ВНР добавлен режим работы по прямой последовательности.
- Защиты 81H/L добавлены в 79.
- Добавлен ручной ВНР.
- Добавлена логика работы для СВ Байпас.

### Изменено
- Обновлён загрузчик на 2.1.0.
- Объединены секции modbus цветов и состояния светодиодов.
- Формат файла адресов modbus заменён на .json.
- Защиты 81H и 81L разделены на две отдельные вкладки.
- Изменён алгоритм учёта времени в 25 БАВР.
- Увеличено максимальное количество строк в логических уравнениях до 128.
- Увеличен порог чувствительности по току для 21 защиты.

### Исправлено
- Исправлена обработка знака табуляции в лог. уравнениях.
- Исправлена возможность чтения до записи переменных VE и VL.
- Исправлен конфликт с драйвером STM VCP (USB PID изменён с 0x5740 на 0xFFFF).
- Исправлена схема готовности БАВР тип 1.
- Исправлена работа по памяти в 67.
- Исправлена стандартная схема пуска осциллографа по синхронной просадке напряжения для БАВР тип 1.

## [1.11.5] - 2022-07-26

### Исправлено
- Порог отображения напряжения увеличен с 3% до 5%.
- Добавлена блокировка 59F по 27F и изменены Квозвр.
- Исправлен расчёт уставки в 32P/Q.
- Устранено зацикливание 79 защиты.

## [1.11.4] - 2022-07-01

### Исправлено
- Накладка HMI разрешает только сигналы с выключателя.
- Изменена схема Неисправность ЦУ РЗА тип 1.
- Исправлена цепочка БНН 25 РЗА.
- Исправлена схема 27R, 21, 81L, 67N, 81H.
- Исправлен выбор группы уставок.

## [1.11.3] - 2022-06-28

### Исправлено
- Исправлена схема АВР для БАВР тип 2.
- Исправлена схема готовности БАВР тип 1.
- Исправлен расчет уставок БНН.

## [1.11.2] - 2022-05-27

### Изменено
- Изменён алгоритм работы адаптивного пуска по напряжению.

### Исправлено
- Исправлены некорректные названия сигналов в осциллограмме.

## [1.11.1] - 2022-04-25

### Исправлено
- Исправлено смещение пояса при обновлении времени с дисплея.
- Исправлена невозможность подключения по USB.
- Исправлена перезагрузка при калибровке терминала.
- Исправлена синхронизация времени по SNTP.
- Исправлена схема неисправности ЦУ РЗА.
- Другие мелкие исправления.

## [1.11.0] - 2022-04-11

### Добавлено
- Добавлена возможность подключения к терминалу по USB и RS-485.
- Добавлен поиск терминалов в сети.
- Добавлен протокол DHCP по умолчанию.
- Добавлен выбор направления в 40 защиту.
- Добавлен выбор работы по СШ/КЛ в защиты РЗА (кроме 32P/Q/25).
- Добавлена адаптивность по 27/27S и 59 в БАВР.
- Добавлен регистратор событий.
- Добавлен контроль срабатывания 27/27S в пуск по углу (по 2 ступени).

### Изменено
- Обновлён контроль ТТ/ТН РЗА/БАВР (отделён от защит).
- Защиты в РЗА запускаются каждую выборку.
- Переименован сигнал WatchDog-а.

### Исправлено
- Исправлено возникновение флага ошибки времени работы выключателя.
- Исправлена работа 25 защиты в БАВР.
- Исправлена работа кривой в 46 защите.
- Исправлена работа по памяти в 21 защите.
- Исправлены другие мелкие ошибки.

### Удалено
- Удалён TFTP сервер.
- Удалена 3 ступень пуска по углу.

## [1.10.3] - 2022-03-05

### Исправлено
- Исправлено зависание прошивки при отключённом Ethernet 2.

## [1.10.2] - 2021-12-08

### Исправлено
- Исправлена перезагрузка после калибровки.
- Исправлена загрузка уравнений с комментариями без пробела с выражением.
- Исправлена проверка пустых скобок в уравнении.
- Исправлена идентификация выдержек времени из 1 символа.

### Добавлено
- Добавлена проверка на число вместо переменной.
- Добавлена проверка на неправильное использование выдержки.

## [1.10.1] - 2021-11-18

### Исправлено
- Исправлено отображение отрицательных расчётных сигналов.
- Исправлена установка статуса ошибки кф. калибровки.

## [1.10.0] - 2021-11-12

### Добавлено
- Добавлен режим быстрой загрузки.
- Добавлена корректировка времени работы выключателей с учётом выдержек входов.
- Добавлены защиты 32P и 32Q.
- Добавлена защита 40.
- Добавлена защита 21.
- Добавлена защита 81L БАВР.
- Добавлена защита по сумме токов БАВР.
- Активирована 2 ступень 59 (БАВР).
- Добавлена возможность чтения выходных переменных.
- Добавлена стандартная схема пуска осциллографа.
- Добавлена поддержка расширения .apscfg.
- Добавлена защита от чтения прошивки.
- Добавлена статистика загрузки процессора.

### Изменено
- Обновлён загрузчик до 2.0.0.
- Обновлена схема ЦУ (РЗА) v32->v38.
- Обновлена схема ЦУ (БАВР) v32->v34.
- Обновлена схема 59 (БАВР) v12->v14.
- Обновлена схема 47 (БАВР) v7->v9.
- Обновлена схема 37 (РЗА) v1->v2.
- Обновлена схема пуска по углу v26->v28.
- Обновлена схема SCBF v4->v6.
- Обновлена схема АВР v29->v31.
- Обновлена схема БАВР v43->v46.
- Обновлена схема ВНР v21->v22.
- Обновлена схема 27/27SF v9->v11.
- Обновлена схема 27/27SA v4->v6.
- Обновлена схема 37F v7->v8.
- Обновлена схема 47F v9->v10.
- Обновлена схема 59NF v8->v10.
- Обновлена схема 59NA v2->v4.
- Обновлён список переменных V->VI.

### Исправлено
- Исправлена блокировка из ЛУ в 25 (РЗА).
- Исправлен выбор ТН в 59 (РЗА).
- Исправлена ошибка назначения нулевых значений TWCB.
- Исправлены ошибки названий переменных в осциллограммах.
- Исправлена печать ошибки в уравнениях.
- Исправлена функция валидации IP.
- Исправлена валидация функций LATCH и PULSE.
- Исправлено назначение времени работы выключателей.

### Удалено
- Убран дублирующий сигнал ключа МУ/ДУ.

## [1.9.3] - 2021-10-20

### Изменено
- Обновлена схема пуска по углу v26->v29.

### Исправлено
- Исправлена работа глобальной блокировки по углу для 2 секции.

## [1.9.2] - 2021-09-23

### Изменено
- Убрана перестановка каналов для 40 терминала (UCСШ <-> UNСШ).

### Исправлено
- Исправлена валидация IP адреса.
- Исправлена проблема подключения после включения с отключенным кабелем.

## [1.9.1] - 2021-09-19

### Добавлено
- Добавлена перестановка каналов для 40 терминала (UCСШ <-> UNСШ).

### Изменено
- Изменён алгоритм тестирования SDRAM.

### Исправлено
- Исправлена печать изменения матриц защит.
- Исправлено появление лишних статусов ошибок плат (ошибки платы E6 для 28 терминала).

## [1.9.0] - 2021-08-13

### Добавлено
- Добавлен ток обратной последовательности в БАВР.
- Добавлена поддержка 57, 67, 68 терминалов.

### Изменено
- Обновлена схема АВР (БАВР) v27->v28 (добавлен неуспешный АВР).
- Обновлена схема 25 v6->v7.
- Изменена стандартная конфигурация.

### Исправлено
- Исправлены названия переменных 37F в осциллограммах.
- Исправлена ошибка в схеме 67N.
- Исправлена инициализация 37F с 2ТТ на 2 секции.

## [1.8.0] - 2021-07-30

### Добавлено
- Добавлены регулируемые выдержки времени реле.
- Добавлены проверки операторов в логических уравнениях.
- Добавлены сообщения об авторизации пользователя FTP.
- Добавлены названия переменных 2 ступени 46 защиты.
- Переменные VI добавлены в редактор уравнений.
- Добавлена печать в лог неправильного уравнения.
- Добавлена поддержка 56 терминала.

### Изменено
- Кодировка .cfg файла comtrade изменена на UTF-8.
- Активирована работа защиты 37 (БАВР).
- Обновлена схема 37 (БАВР) v6->v7.
- Обновлена схема пуска по углу v25->v26.
- Обновлена схема ВНР v19->v21.

### Исправлено
- Исправлена проверка номера дискретного входа в логических уравнениях.
- Исправлена инициализация дискретных выходов (стандартная конфигурация).
- Исправлены некорректные значения на аналоговых входах после калибровки.
- Исправлена ошибка увеличения номера лога.

## [1.7.7] - 2021-07-21

### Добавлено
- Добавлена поддержка 62, 63, 64, 65 терминалов.

## [1.7.6] - 2021-07-16

### Добавлено
- Добавлена поддержка 50, 51, 52, 61 терминалов.

## [1.7.5] - 2021-07-08

### Исправлено
- Убрано усреднение углов.

## [1.7.4] - 2021-07-08

### Изменено
- Обновлён список терминалов.

## [1.7.3] - 2021-06-18

### Изменено
- Обновлён список терминалов.

## [1.7.2] - 2021-06-16

### Исправлено
- Исправлено повреждение осциллограммы при включении.

## [1.7.1] - 2021-06-15

### Исправлено
- Исправлено повреждение осциллограммы.

## [1.7.0] - 2021-06-11

### Добавлено
- Добавлен ручной АВР.
- Добавлен УРОВ по АВР/БАВР.
- Добавлен сигнал "Работа осциллографа".
- Добавлено усреднение углов аналоговых сигналов.
- Добавлена проверка аргументов операторов в интерпретаторе логических уравнений.

### Изменено
- Обновлена схема ЦУ РЗА v29->v32.
- Обновлена схема ЦУ БАВР v26->v32.
- Обновлена схема БАВР v34->v43.
- Обновлена схема АВР (БАВР) v21->v27.
- Обновлена схема ВНР (БАВР) v18->v19.
- Обновлены стандартные значения осциллографа.
- Активирована переменная L_0_25 (Контроль СР).
- Активирована работа по списку сигналов OscList.
- Убрана переменная RNM_0_1_9 (КС ВНР).
- Обновлён список сигналов RDI.
- Обновлена схема 67N (РЗА) v15->v16.
- Обновлена схема 27/27S (РЗА) v12->v13.
- Обновлена схема 59 (РЗА) v8->v9.
- Убрана перестановка токовых каналов для ввода.
- Обновлены стандартные значения АВР.
- Изменён алгоритм обновления прошивки (теперь создаются временная и предыдущая версии).
- Повышена скорость обмена с дисплеем.

### Исправлено
- Исправлена работа РНМ по расчётному Ib.
- Исправлены названия функций содержащих "СВ".
- Исправлена работа фазного РНМ по адаптивному φмч.

## [1.6.1] - 2021-05-20

### Исправлено
- Исправлено циклическое зависание при введении пуска по углу.

## [1.6.0] - 2021-05-12

### Добавлено
- Добавлена команда сброса времени выключателей.
- Добавлена накладка адаптивности по углу.

### Изменено
- Обновлена схема пуска по углу v22->v25.

## [1.5.2] - 2021-04-28

### Изменено
- Ускорен запуск прошивки.

### Исправлено
- Исправлено появление мусора в осциллограмме при включении.
- Исправлены ошибки с пропажей сообщений лога.

## [1.5.1] - 2021-04-15

### Исправлено
- Исправлено отключение FTP при работе через USB.

## [1.5.0] - 2021-04-08

### Добавлено
- Добавлена переменная блокировки при длительном расхождении углов.
- Добавлена проверка превышения допустимого времени работы выключателя.
- Добавлена проверка целостности контрольной суммы прошивки.
- В осциллограмму добавлены сигналы превышения времени работы выключателя.

### Изменено
- Переименована зона modbus NLBF->37.
- Изменено расположение сигналов V (уменьшено количество входных с 64 до 48, увеличено выходных с 144 до 160).
- Изменено название сигнала TISFiF_0_0_12.
- Логи перенесены в папку log (изменён формат именования).
- Защита 25 РЗА запускается каждую выборку.
- Обновлена схема пуска по углу v19->v22 (добавлена адаптивность по зоне).

### Исправлено
- Исправлен формат печати года в Comtrade.
- Исправлены ошибки в обновлении конфигурации.
- Исправлена загрузка старых конфигураций.

## [1.4.2] - 2021-03-18

### Добавлено
- Добавлены переменные типа выходных сигналов выключателя РЗА.

### Изменено
- Изменены названия переменных (команды включения/выключения выключателей).
- Обновлена схема ЦУ РЗА v28->v29.
- Изменено длительность импульса сигналов HMI и TC на с 5мс на 1мс.
- Изменена подпись неизмеренных значений времени работы выключателя.
- Включена печать угла согласования у 1СШ.
- dFi в 25 защитах (РЗА и БАВР) приведено к диапазону +-180.

### Исправлено
- Исправлено обновление времени с дисплея.
- Исправлен расчёт углов у напряжений КЛ с углом согласования у СШ больше 0.
- Исправлены значения для конфигураций без времени выключателей.
- Исправлен расчёт и работа по расчётному времени выключателей.
- Исправлено обновление времени выключателей в защитах.

## [1.4.1] - 2021-03-11

### Добавлено
- В зону идентификации добавлен идентификатор терминала (совпадает с номером на задней крышке).

### Изменено
- Граница шума ТН увеличена до 3% для всех значений.
- Возвращена фильтрация шума по границе для расчётных значений.

### Исправлено
- Исправлена загрузка отсутствующих секций.

## [1.4.0] - 2021-03-05

### Добавлено
- Добавлен встроенный сторожевой таймер.
- Добавлен новый тип тестовых сигналов.
- Добавлено обнуление входных данных через 5 выборок (с ошибкой обмена), при меньшем количестве данные дублируются.
- Добавлены адаптивные уставки в РНМ.
- Добавлен часовой пояс.
- Добавлено определение времени работы выключателей.
- Добавлена переменная блокировки длительного пуска.
- Добавлен сброс на стандартную конфигурацию при отсутствии файла конфигурации.

### Изменено
- Увеличена точность установки времени через SNTP.
- Изменена обработка дискретных входов в режиме тестирования (привязка к сигналам RDI).
- Изменён принцип формирования версии прошивки (для beta прошивок теперь указывается номер).

### Исправлено
- Исправлена нижняя граница сигналов с АЦП.
- Исправлена работа тестовых сигналов без аналоговой платы.
- Исправлена ошибка из-за которой при неисправности дискретных выходов, дискретные входа не считывались.
- Исправлена валидация активации 50/51 БАВР и 50/51 АВР.
- Исправлена ошибка отображения изменений в матрице (Функции управления на Выхода/Светодиоды).

## [1.3.7] - 2020-12-02

### Добавлено
- Добавлен тип сигнала в матрицы осциллограмм.
- Добавлена активация ступени в SCBF, схема обновлена v3->v4.
- Добавлены переменные в CCBF, схема обновлена v7->v8.
- Добавлена защита CCBV.
- В осциллограмму добавлены сигналы с дисплея и MIRAPS.
- Добавлены блоки TRIGF и TRIGR.
- Добавлены пользовательские сигналы OscList.

### Изменено
- Обновлена схема 27/27S БАВР.
- Обновлена схема 27/27S АВР.
- Обновлена схема 47 БАВР.
- Обновлена схема 59 БАВР.
- Обновлена схема 59 АВР.
- Обновлена схема 59 ВНР.
- Защита NLBF переименована в 37F, схема обновлена v5->v6.
- Обновлена схема 59N БАВР.
- Обновлена схема 59N АВР.
- Обновлена схема 59N ВНР.
- Обновлена схема РНМ.
- Обновлена схема ВНР (БАВР) v17->v18.

### Исправлено
- Исправлена ошибка инициализации пуска по углу (возникала при изменении типа терминала).
- Исправлена загрузка длинных логических уравнений.
- Скорректирован угол для расчёта Фурье.

## [1.3.6] - 2020-11-17

### Исправлено
- Исправлена максимальная длина строки уравнения.
- Исправлена инициализация уравнений.

## [1.3.5] - 2020-11-17

### Добавлено
- Добавлена проверка версий ПО плат.
- Добавлена проверка размера CNFG сектора.

### Изменено
- Изменён редактор логических уравнений.

## [1.3.4] - 2020-10-30

### Изменено
- Обновлена схема ВНР (БАВР) v16->v17.
- Осциллограммы перенесены в папку osc (изменён формат именования).

## [1.3.3] - 2020-10-23

### Добавлено
- Добавлена команда сброса из ПО в.у.

### Изменено
- Обновлена схема ЦУ (РЗА) v27->v28.
- Обновлена схема ЦУ (БАВР) v25->v26.

### Исправлено
- Исправлены диапазоны для валидации переменных PR50/51_x_7_A/B PR67N_x_22_A/B.
- Отключена печать в осциллограммах переменных 2 ступени 59F в БАВР.
- Исправлена работа малонагруженных конфигураций.
- Убраны углы согласования у токов.
- Исправлена поддержка конфигураций без новой строки на конце.

## [1.3.2] - 2020-10-14

### Добавлено
- В БАВР добавлен пуск осциллографа по красной кнопке.

### Исправлено
- Исправлена печать переменных из ЛУ в защитах.

## [1.3.1] - 2020-10-13

### Добавлено
- Добавлена команда пуска осциллографа из ПО в.у.

### Изменено
- Изменён порог шума для каналов напряжения с 0,5% на 1% от Uном.

### Исправлено
- Исправлено зависание при обновлении конфигурации.
- Исправлена ошибка повторной загрузки с карты конфигурации после обновления через ПО в.у.
- Исправлен расчёт частоты при углах согласования больше 0.

## [1.3.0] - 2020-10-09

### Добавлено
- Добавлено обновление загрузчика (интегрирована версия 1.0.0).
- В БАВР добавлен переменная выбора группы уставок и дискретный вход.
- Добавлена защита 37.
- Добавлена поддержка группы уставок для РНМ.
- Добавлена переменная PR50_51_x_28.
- В матрицу защит РЗА добавлены 48/51LR и 37.
- Добавлена 2 ступень 59F.
- Добавлена накладка L_0_25.

### Изменено
- Ускорено время запуска программы.
- Рефакторинг процедуры инициализации.
- Убрано повторное открытие файла конфигурации.
- Изменены стандартные параметры сети.
- Изменена методика проверки на шум.
- Обновлена схема ЦУ (РЗА) v24->v27.
- Обновлена схема АВР (РЗА) v4->v5.
- Обновлена схема ВНР (РЗА) v4->v5.
- Обновлена схема контроля ТТ (РЗА) v2->v3.
- Обновлена схема 27R v5->v6.
- Обновлена схема 48/51LR v3->v4.
- Обновлена схема 50/51 v16->v19.
- Обновлена схема 50BF v11->v12.
- Обновлена схема 50N/51N v15->v18.
- Обновлена схема 67 v16->v18.
- Обновлена схема 79 v9->v10.
- Обновлена схема 59F v11->v12.
- Обновлена схема БАВР v33->v34.

### Исправлено
- Включено усреднение и фильтрация шума РНМ.
- Исправлена расстановка временных меток процедуры инициализации.
- Исправлена ошибка при обновлении параметров защит.
- Исправлена ошибка в схеме ВНР (БАВР) - уставка по 2СШ отстраивалась по 1СШ.
- Исправлены названия переменных защит (47, 50BF, 50/51, 50N/51N, 67, 67N) в осциллограммах.
- Исправлена печать лишних переменных в осциллограмме.
- Исправлено чтение показаний энергии.
- Исправлена ошибка инициализации при перестановке аналоговых каналов.

## [1.2.3] - 2020-09-03

### Добавлено
- Добавлена печать статистики и статусов.
- Добавлена фильтрация шума для РНМ.

### Изменено
- Убраны различия соединительной платы.
- Разрешена работа при отсутствии платы в базе.

### Исправлено
- Исправлена загрузка резервной секции.
- Исправлен механизм подключения USB.
- Исправлено название устройства USB.
- Исправлено отображение сигналов без угла.
- Исправлено отображение угла РНМ.

## [1.2.2] - 2020-08-07

### Добавлено
- Добавлены тестовые сигналы энергии.

### Изменено
- Доработан учёт энергии.

### Исправлено
- Включён расчёт частоты для БАВР тип 1.
- Исправлено обновление конфигурации БАВР -> РЗА.
- Исправлен размер секции энергии.
- Исправлено сохранение времени отключения.
- Исправлен расчёт углов.

## [1.2.1] - 2020-08-05

### Добавлено
- Добавлен сброс тестовых и калибровочных регистров.

### Изменено
- Обновлена схема ЦУ (БАВР) v24->v25.
- Обновлена схема Контроль ТТ (БАВР) v5->v6.
- Обновлена схема БНН и Контр. авт. ТН (БАВР) v16->v17.
- Обновлена схема 47F v6->v7.
- Обновлена схема 50/51F v5->v6.
- Обновлена схема 59F v10->v11.
- Обновлена схема 59NF v7->v8.
- Обновлена схема 50/51A v1->v2.
- Обновлена схема 59A v1->v2.
- Обновлена схема 59NA v1->v2.
- Обновлена схема 59V v6->v7.
- Обновлена схема 59NV v5->v7.
- Обновлена схема ACBF v3->v4.
- Обновлена схема CCBF v5->v7.
- Обновлена схема FiF v16->v19.
- Обновлена схема NLBF v3->v5.
- Обновлена схема SCBF v2->v3.

### Исправлено
- Исправлена загрузка стандартных коэффициентов.
- Исправлены размеры зон Modbus.
- Исправлено обнуление сигнала IH2.

## [1.2.0] - 2020-07-31

### Изменено
- Унифицированы адреса Modbus.
- Отключена печать переменной PR25F_0_1_3.
- Отключена печать переменных БНН по 3U0.
- Изменён порядок печати секций и переменных матриц.
- Обновлена схема АВР (БАВР) v20->v21.
- Обновлена схема БАВР v32->v33.
- Обновлена схема 27/27SF v7->v9.
- Обновлена схема 27/27SA v1->v4.
- Обновлена схема РНМ v7->v9.

### Исправлено
- Мелкие правки.
- Исправлены условия активации пуска по углу.
- Исправлен расчёт РНМ для cхемы Uл.
- Исправлена валидация переменных при обновлении с дисплея.
- Исправлена совместимость с предыдущими версиями конфигурации.
- Исправлена процедура загрузки при некорректной конфигурации.

## [1.1.0] - 2020-07-27

### Добавлено
- Добавлена поддержка БАВР тип 1.
- Добавлена функция расчёта Uca для 2Uл.
- Добавлены стандартные названия для входов.
- Добавлена печать изменений в матрице.
- Добавлен новый контур памяти.

### Изменено
- Обновлена схема 47F v5->v6.
- Обновлена схема 59F v8->v10.
- Обновлена схема 27_27SF v6->v7.
- Обновлена схема 59NF v6->v7.
- Обновлена схема 59V v5->v6.
- Обновлена схема БНН и Контр. авт. ТН (БАВР) v13->v16.
- Обновлена схема АВР (БАВР) v17->v20.
- Обновлена схема БАВР v27->v32.
- Обновлена схема ВНР (БАВР) v14->v16.
- Обновлена схема ЦУ (БАВР) v23->v24.
- Обновлена схема РНМ v6->v7.
- Запрещена запись файлов по tftp (кроме setup.txt, firmware.bin и firmwareAES128.bin)
- Изменён формат наименования осциллограмм.
- Тип схемы 1 доступен для любого типа терминала.
- Обновлён протокол обмена с дисплеем.

### Исправлено
- Мелкие правки.
- Исправлена работа RS-485 на скорости выше 38400.
- Убрана блокировка RTOS циклом опроса (больше времени на фоновые задачи).
- Обновлена схема 25F v4->v5 (исправлена ошибка с БНН).

## [1.0.3] - 2020-07-22

### Изменено
- Отсутствие коэффициентов юстировки не вызывает неисправность терминала.

### Исправлено
- Исправлена загрузка стандартных коэффициентов юстировки.

## [1.0.2] - 2020-07-21

### Изменено
- Обновлена схема БАВР v27->v27.1.

## [1.0.1] - 2020-06-23

### Изменено
- Отключена печать переменных ABT_y_1_15 и FABT_y_1_20.
- Обновлена схема пуска по углу v15->v16.

## [1.0.0] - 2020-06-18

### Добавлено
- Добавлены базовые защиты БАВР.
- Добавлен сброс статусов плат при включении.
- Добавлен сигнал пуска осциллографа с дисплея.
- Добавлен доступ по битовым адресам в Modbus.
- Добавлена защита CCBF.
- Добавлено сохранение конфигурации во FLASH (ускоренный запуск).
- Добавлены блокировки телеуправления в токовых защитах.
- Добавлено измеренное Uном/V3.

### Изменено
- Интеграция программ РЗА и БАВР.
- Обновлены списки сигналов РЗА и БАВР.
- Изменена процедура инициализации.
- Возвращена проверка точности float переменных.
- USB MSC заменён на CDC.
- Убрано разделение на setup и setup42.
- Обновлены защиты РЗА (удалены сбросы).
- Отключена печать статистики.
- Обновлены схемы БНН и Контр. авт. ТН РЗА v4->v5.

### Исправлено
- Исправлена ошибка расчёта с углами согласования.
- Исправлена блокировка сигналов HMI.
- Исправлена печать идентификатора терминала.
- Исправлена библиотека Modbus.
- Исправлена блокировка в 67N (v11 -> v12).

## [0.3.15] - 2020-08-24

### Добавлено
- Обновлён список поддерживаемых плат.

## [0.3.14] - 2019-12-18

### Добавлено
- Добавлены новые переменные защиты 50N/51N.
- Добавлена поддержка десятичного разделителя - точки.
- Добавлен расчёт суммы высших гармоник тока.
- Добавлены расчётные фазные напряжения.
- Добавлена метка старта цикла опроса.
- Добавлена секция с настройками дисплея.

### Изменено
- Обновлена схема защиты 50N/51N v11 -> v14.
- Обновлена схема защиты 67 v14 -> v15.
- Изменены переменные 46 защиты (задание I1 в процентах).
- Включена поддержка устаревшего параметра B_9_0.
- Переименовано НО/НЗ -> Инверсия.
- Увеличена скорость запуска.
- Убрана блокировка выходных дискрет при неисправностях.
- Отключён сброс на предыдущую конфигурацию.

### Исправлено
- Исправлена блокировка часового пояса (теперь используется из конфигурации).
- Исправлена инициализация функций расчёта энергии.
- Исправлена ошибка при тестировании дискрет (после тестирования значения не сбрасывались).
- Исправлен сброс на предыдущую конфигурацию (при отсутствии основной).
- Исправлена проверка наименований выдержек времени.
- Исправлена ошибка печати времени отключения.
- Исправлена работа терминала без карты памяти.

## [0.3.13] - 2019-11-25

### Изменено
- Из формирования неисправности исключено переполнение очереди осциллографа.
- Изменен алгоритм печати статусов (печатаются при изменении).
- Инвертирован сигнал watchdog-а.
- Отключена печать счётчиков ошибок плат.

## [0.3.12] - 2019-11-22

### Добавлено
- Добавлена переменная PR46_x_10.

### Изменено
- Перемещена зона с калибровочными коэффициентами.
- Обновлена схема защиты 46 v6 -> v7.
- Изменена схема обработки дискретных выходов.

### Исправлено
- Исправлена ошибка обновления конфигурации с лицевой панели.
- Исправлена ошибка активации интернет соединения.
- Восстановлено назначение выхода watchdog-а через матрицу.

## [0.3.11] - 2019-11-20

### Изменено
- Изменён диапазон переменной MaxOsc.

### Исправлено
- Исправлены адреса Modbus.

## [0.3.10] - 2019-11-20

### Изменено
- Изменены сообщения лога.
- Отключена печать тестового файла.

### Исправлено
- Исправлено зависание при отсутствии файла конфигурации.

## [0.3.9] - 2019-11-20

### Добавлено
- Добавлена проверка баланса скобок в логических уравнениях.
- Добавлено ограничение размера файла лога в 10 МБ.
- Добавлена печать регистра статуса в лог.
- Добавлены сообщения о переименование и удалении файлов.

### Изменено
- Изменена единица измерения переменной SNTP_Period с "мс" в "мин".
- Отключена печать переменной Sync.

### Исправлено
- Исправлен тип переменной PR67N_x_7.
- Исправлено циклическое появление статуса неисправности.
- Исправлена ошибка при загрузке конфигурации.
- Исправлена ошибка при обновлении времени по ModbusTCP/RTU.

## [0.3.8] - 2019-11-18

### Добавлено
- Добавлена выдержка времени на возврат Wathdog-а.
- Добавлена ежеминутная печать статистики по платам при наличии ошибок.
- Добавлен контроль количества открытых файлов.

### Изменено
- Обновлены коды ошибок.
- Обновлена схема защиты 46 v5 -> v6.
- Обновлена схема защиты 67 v13 -> v14.
- Изменены стандартные IP.
- Изменён формат печати лога при инициализации.

### Исправлено
- Исправлена ошибка перезагрузки терминала при обновлении.
- Исправлено обновление выдержек времени у дискретных входов.
- Исправлена ошибка обновления на предыдущую загружаемую конфигурацию.
- Исправлена блокировка записи осциллограмм при переполнении очереди.
- Исправлена ошибка сравнения секций.
- Исправлен алгоритм определения неправильного оперативного питания.
- Исправлена логика работы блока DC (счётчика импульсов).
- Убрана проверка инициализации аргументов в LATCH (можно вызывать в любом месте).
- Убрана проверка инициализации дискретных входов в редакторе логических уравнений.

## [0.3.7] - 2019-11-07

### Добавлено
- Добавлена программа для автоматической сборки прошивки.
- Добавлено динамическое обновление групп уставок.
- Добавлена печать статистики по платам 1 раз в час.
- Добавлена поддержка символов экранирования.

### Изменено
- Обновлена схема 50/51 v14 -> v15.
- Включена запись переменных NDI.

### Исправлено
- Исправлена схема обработки дискретных входов (выдержки и удержания не работали).
- Исправлен механизм блокировки при подключении USB.
- Исправлена печать секции "Led" (ранее при изменении параметров с дисплея, параметры светодиодов сбрасывались).

## [0.3.6] - 2019-10-30

### Изменено
- Обновлена схема 50/51 v13 -> v14.
- Обновлена схема ЦУ v21 -> v23.

### Исправлено
- Исправлена схема обработки дискретных входов на переменке.
- Исправлено влияние инверсии при обработке дискрет.

## [0.3.5] - 2019-10-28

### Исправлено
- Исправлена схема обработки дискрет для переменки.
- Исправлено влияние инверсии при тесте дискрет.
- Исправлены сигналы ускорений 50/51 и 67.

## [0.3.4] - 2019-10-24

### Исправлено
- Исправлена ошибка теста дискрет и калибровки.
- Исправлено сообщение при отсутствии резервной секции.

## [0.3.3] - 2019-10-24

### Изменено
- Время отключения записывается в резервную секцию.

### Исправлено
- Энергия сохраняется при перезагрузке и отключении питания.

## [0.3.2] - 2019-10-23

### Исправлено
- Исправлено условие чтение секций.

## [0.3.1] - 2019-10-23

### Добавлено
- Добавлена основные статусы.
- Подготовлена интеграция с ПО дисплея.
- Добавлен сигнал пуска осциллографа с дисплея.

### Изменено
- Изменены статусы при обновлении конфигурации.

### Исправлено
- Исправлено тестирование отключенных дискрет.
- Исправлены ошибки в сообщениях лога.

## [0.3.0] - 2019-10-22

### Добавлено
- Добавлены статусы ошибок плат.
- При неправильной конфигурации добавлен сброс на предыдущую.
- Добавлен сброс расчётных сигналов AE_IH2, AE_cosFi, AE_f.

### Изменено
- Расчёт Ib отключён для схемы 3ТТ.
- Расчёты линейных напряжений отключены для схем Uл.
- Включено сохранение секции Led.

### Исправлено
- Исправлен расчёт I2.
- Исправлена 59 защита.
- Исправлена валидация переменной PR67N_x_9.
- Исправлены проверки при отключённых защитах.

## [0.2.0] - 2019-10-16

### Изменено
- Изменён алгоритм отсеивания шумов (для токов коэффициент увеличен до 1%).
- Отключена печать переменной "B_1_9_0".

### Исправлено
- Исправлен алгоритм юстировки каналов (убрана связь с вторичными номиналами трансформаторов).
- Исправлен алгоритм усреднения (убрана накопительная ошибка).
- Исправлен расчёт и отображение сигнала блокировки по Ih2.
- Исправлена блокировка по Ih2 в 50/51 И 50N/51N.
- Исправлена работа с переменными защит в редакторе логических уравнений.
- Исправлены ошибки при обновлении конфигурации.
- Исправлена ошибка зависания при включении терминала и записи осциллограмм.

## [0.1.61] - 2019-10-14

### Изменено
- Запрещена запись файла лога.

### Исправлено
- Исправлено зависание при отсутствии выдержек времени.
- Исправлен сброс уставки по току в защите 67N.

## [0.1.60] - 2019-10-11

### Изменено
- Отключена защита 48/51LR.

### Исправлено
- Мелкие правки.

## [0.1.59] - 2019-10-10

### Добавлено
- Добавлен статус ошибки выбора оперативного питания.

### Изменено
- Изменён алгоритм обновления параметров.
- Значения в зоне энергий изменены на первичные.
- Теперь в ячейку с частотой записываются первичные значения.
- Изменены адреса телекоманд.

### Исправлено
- Исправлена валидация при обновлении с дисплея.
- Исправлено ошибка при считывании строковых параметров.
- Исправлено определение ошибки необъявленной переменной в LATCH (удержание V, VE, VL до присвоения).
- При отсутствии плат на входах отображается 0 (было 1).

## [0.1.58] - 2019-10-02

### Добавлено
- Добавлена защита ACBF.
- Добавлена защита PDRF.
- Добавлена корректировка фаз для расчётных сигналов.
- Добавлен дискретный метод расчёта Фурье преобразования (DFT).
- Добавлена зона считывания энергии.
- Добавлен сброс энергии по телекоманде.

### Изменено
- Ревизия основной платы теперь не влияет на стандартный IP адрес.
- Изменён алгоритм учёта энергии.
- Изменены диапазоны B_4_3, B_5_2 и B_6_3.
- На дисплее энергия отображается за всё время (раньше было за период).
- У переменных TIS удалена нулевая секция шин.
- Изменён список сигналов V.
- Возвращено усреднение.
- Отключена печать статусов плат.

### Исправлено
- Исправлена ошибка с изменением порядка аналоговых каналов.
- Определено поведение для неопределённых ревизий железа.
- Исправлен таймаут старта LSE.
- Исправлена схема контроля ТТ для РЗА.

## [0.1.57] - 2019-09-06

### Добавлено
- Добавлена поддержка watchdog-а.
- Добавлено разделение по типу терминала БАВР / РЗА.

### Изменено
- Переработаны функции загрузки и создания файла конфигурации.
- Изменён порядок печати секций.
- Убраны расчётные сигналы углов.

### Исправлено
- Исправлена блокировка пуска осциллографа.

## [0.1.56] - 2019-08-01

### Добавлено
- Добавлены новые настройки последовательных портов.
- Добавлено определение ревизии железа.
- Добавлена запись в лог наименование ПО и ревизии железа.

### Изменено
- Активирован расчёт линейных напряжений независимо от активации защит.
- Изменён расчёт нулевой последовательности I0 -> 3I0, U0 -> 3U0.
- Изменены стандартные адреса SNTP серверов.
- Изменена стандартная скорость Modbus RTU на 19200.

### Исправлено
- Исправлена ошибка отсеивания помех.
- Исправлена ошибка в обновлении времени по SNTP.

## [0.1.55] - 2019-07-17

### Добавлено
- Добавлен загрузчик, основная программа стартует с адреса 0x08008000.
- Добавлены параметры для Ethernet 1.

### Изменено
- Параметры SNTP перемещены в секцию Network.
- Для SNTP вместо URL задаётся IP.
- Расчётные сигналы углов перенесены в конец.
- Изменён стандартный IP адрес для терминалов 1 ревизии.
- Мелкие правки.

### Исправлено
- Исправлена ошибка в расчёте адресов Modbus.

## [0.1.54] - 2019-07-12

### Добавлено
- Добавлены расчётные сигналы - косинус фи и частота.
- Добавлены стандартные значения кф. юстировки.

### Изменено
- Переименованы физические и расчётные сигналы.

### Исправлено
- При отсутствии сигналов на аналоговых входах, значения нулевые.
